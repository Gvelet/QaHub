document.addEventListener("DOMContentLoaded",(()=>{console.log("Инициализация БЛОГА кА");const t=document.querySelector("h1"),e=document.querySelector(".breadcrumbs span:last-child");t&&e&&(e.textContent=t.textContent.trim());let n=new URL(window.location.href).pathname.replace(/index\.html$/i,"").replace(/\.html$/i,"");n.startsWith("/")||(n="/"+n);const i=`https://qaspace.ru${n}`;let a=document.querySelector('link[rel="canonical"]');if(a||(a=document.createElement("link"),a.rel="canonical",document.head.appendChild(a)),a.getAttribute("href")||a.setAttribute("href",i),!t)return;const o=t.textContent.trim();document.title&&""!==document.title.trim()||(document.title=o);const c=`Статья на тему «${o}» - Quality Space`;let r=document.querySelector('meta[name="description"]');r||(r=document.createElement("meta"),r.name="description",document.head.appendChild(r)),r.getAttribute("content")||r.setAttribute("content",c);const d=r.getAttribute("content")||c,l=document.querySelector(".post-content img"),m=l?new URL(l.getAttribute("src"),i).href:"https://qaspace.ru/img/bg.png";function u(t,e){let n=document.querySelector(`meta[name="${t}"]`);n||(n=document.createElement("meta"),n.setAttribute("name",t),document.head.appendChild(n)),n.getAttribute("content")||n.setAttribute("content",e)}u("twitter:title",o),u("twitter:description",d),u("twitter:card","summary_large_image"),u("twitter:image",m);const s=document.body.getAttribute("data-article-date")||(new Date).toISOString().slice(0,10),p={"@context":"https://schema.org","@type":"BlogPosting",headline:o,description:d,author:{"@type":"Person",name:"Михаил Лемешев"},publisher:{"@type":"Organization",name:"Тестировщик Михаил Лемешев",logo:{"@type":"ImageObject",url:"https://psylemesheva.ru/images/logo.svg"}},mainEntityOfPage:{"@type":"WebPage","@id":i},image:m,datePublished:s,dateModified:s};let g=document.querySelector('script[type="application/ld+json"][data-type="article"]');g||(g=document.createElement("script"),g.type="application/ld+json",g.setAttribute("data-type","article"),document.head.appendChild(g)),g.textContent=JSON.stringify(p)}));
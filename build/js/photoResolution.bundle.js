!function(){const e=document.getElementById("fileButton"),t=document.getElementById("fileInput"),n=document.getElementById("fileName"),d=document.getElementById("closeButton"),o=document.querySelector(".resized__select"),c=document.querySelector(".resized__initial-size"),i=document.querySelector(".resized__new-size");let l;const a=document.querySelector(".resized-wrapper-img"),r="image/jpeg",s={black:3.92,dog:120,forest:162},m=()=>{a.textContent="",t.value="",n.value="Файл не выбран"},u=e=>{c.innerHTML=`Изначальный вес: ${e} кб`},g=e=>{l&&l.remove(),l=document.createElement("img"),l.src=e,l.classList.add("resized-img"),a.insertBefore(l,a.firstElementChild)};g(`./img/${o.value}.jpg`);const v=()=>`./img/${o.value}.jpg`;u(s.black),e.addEventListener("click",(()=>t.click())),t.addEventListener("change",(e=>{(()=>{const e=t.files.length>0?t.files[0].name:"Файл не выбран";n.value=e})(),(e=>{const t=e.target.files[0];t&&(e=>{const t=new FileReader;t.onload=t=>{a.textContent="",g(t.target.result),u(e.size/1e3)},t.readAsDataURL(e)})(t)})(e)})),d.addEventListener("click",(()=>{m(),u(s[o.value]),g(v())})),o.addEventListener("change",(()=>{const e=o.value;u(s[e]),m(),g(v())})),document.getElementById("downloadButton").addEventListener("click",(()=>{const e=(()=>{const e=document.getElementById("resizedWidth").value,t=document.getElementById("resizedHeight").value,n=document.createElement("canvas"),d=n.getContext("2d");n.width=e,n.height=t,d.drawImage(l,0,0,e,t);const o=n.toDataURL(r);return n.toBlob((e=>{i.innerHTML=`Новый вес: ≈ ${e.size/1e3} кб`}),r),o})(),t=document.createElement("a");t.href=e,t.download="resized_image",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}();
!function(){const e=document.getElementById("fileButton"),t=document.getElementById("fileInput"),n=document.getElementById("fileName"),d=document.getElementById("closeButton"),i=document.querySelector(".resized__select"),o=document.querySelector(".resized__initial-size"),c=document.querySelector(".resized__new-size"),l=document.querySelector(".resized-wrapper-img");let a,r="image/jpeg";const s={black:3.92,dog:120,forest:162},m=()=>{l.textContent="",t.value="",n.value="Файл не выбран"},u=e=>{o.innerHTML=`Изначальный вес: ${e} кб`},g=e=>{a&&a.remove(),a=document.createElement("img"),a.src=e,a.classList.add("resized-img"),l.insertBefore(a,l.firstElementChild)};g(`../../img/${i.value}.jpg`);const v=()=>`../../img/${i.value}.jpg`;u(s.black),e.addEventListener("click",(()=>t.click())),t.addEventListener("change",(e=>{(()=>{const e=t.files.length>0?t.files[0].name:"Файл не выбран";n.value=e})(),(e=>{const t=e.target.files[0];t&&(e=>{const t=new FileReader;t.onload=t=>{l.textContent="",g(t.target.result),u(e.size/1e3),r=e.type},t.readAsDataURL(e)})(t)})(e)})),d.addEventListener("click",(()=>{m(),u(s[i.value]),g(v()),r="image/jpeg"})),i.addEventListener("change",(()=>{const e=i.value;u(s[e]),m(),g(v()),r="image/jpeg"})),document.getElementById("downloadButton").addEventListener("click",(()=>{const e=(()=>{const e=document.getElementById("resizedWidth").value,t=document.getElementById("resizedHeight").value,n=document.createElement("canvas"),d=n.getContext("2d");n.width=e,n.height=t,d.drawImage(a,0,0,e,t);const i=n.toDataURL(r);return n.toBlob((e=>{c.innerHTML=`Новый вес: ≈ ${e.size/1e3} кб`}),r),i})(),t=document.createElement("a");t.href=e,t.download="resized_image",document.body.appendChild(t),t.click(),document.body.removeChild(t)}))}();
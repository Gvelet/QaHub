!function(){let t={},s=0,n=[];const e=document.getElementById("testWrapper");let i,a;const r=()=>{const t=document.querySelector(".tests-start__time span"),s=Math.floor(a/60),n=a%60,e=`${String(s).padStart(2,"0")}:${String(n).padStart(2,"0")}`;t.textContent=e,a<=0&&(clearInterval(i),t.textContent="Время вышло!")};function c(t){const n=t.questions[s],e=t.questions.length;return`\n        <div class="tests-start">\n            <div class="tests-start__top">\n                <div class="tests-start__counter-questtion">\n                    <h4 class="tests-start__counter-title">Вопросы:</h4>\n                    <div class="tests-start__progress-bar">\n                        <div class="tests-start__progress-bar-fill" id="progressBarFill" style="width: ${(s+1)/e*100}%;"></div>\n                    </div>\n                    <span>${s+1}/${e}</span>\n                </div>\n                <div class="tests-start__time">\n                    <h4 class="tests-start__time-title">Осталось времени:</h4>\n                    <span></span>\n                </div>\n            </div>\n            <div class="tests-start__test">\n                <div class="tests-start__questions">\n                    <div class="tests-start__questions-content">\n                        <div class="tests-start__question-title">Вопрос ${s+1}:</div>\n                        <div class="tests-start__question">${n.question}</div>\n                    </div>\n                    ${n.image?`<img class="tests-start__questions-img" src="./img/${n.image}" alt="Картинка для вопроса">`:""}\n                </div>\n                <div class="tests-start__answers">\n                    <h4 class="tests-start__answers-title">Варианты ответа:</h4>\n                    <ul class="tests-start__answers-list">\n                        ${n.answers.map(((t,s)=>`\n                            <li class="tests-start__answers-item">\n                                <input type="radio" name="answer" id="answer-${s}" class="tests-start__answer-input">\n                                <label for="answer-${s}" class="tests-start__answer-label">${t.text}</label>\n                            </li>\n                        `)).join("")}\n                    </ul>\n                </div>\n            </div>\n        </div>`}function o(){const s=new URLSearchParams(window.location.search).get("test"),n=t[s];e.innerHTML=c(n),function(t){a=60*t.time,r(),i=setInterval((()=>{a--,r()}),1e3)}(n),l(n)}function l(t){document.querySelectorAll('input[name="answer"]').forEach((i=>{i.addEventListener("change",(()=>function(t){const i=document.querySelector('input[name="answer"]:checked');if(i){const a=Array.from(i.parentNode.parentNode.children).indexOf(i.parentNode),r=t.questions[s].answers.findIndex((t=>t.isCorrect));n[s]=a===r,s++,s<t.questions.length?(e.innerHTML=c(t),l(t)):function(t){const s=n.filter((t=>t)).length;e.innerHTML=`\n        <div class="results">\n            <h2>Тест завершен!</h2>\n            <p>Вы ответили правильно на ${s} из ${t.questions.length} вопросов.</p>\n        </div>\n    `}(t)}else alert("Пожалуйста, выберите ответ!")}(t)))}))}!async function(){const s=await fetch("https://raw.githubusercontent.com/Gvelet/QaHub-api/refs/heads/main/db/combined.json");(await s.json()).forEach((s=>{const n=Object.keys(s)[0];t[n]=s[n]})),function(){const s=new URLSearchParams(window.location.search).get("test");if(t[s]){const n=t[s];e.innerHTML=function(t){return`\n        <div class="tests__inner">\n            <div id="test-title" class="test__title title">${t.title}</div>\n            <div class="test__wrapper">\n                <button id="start-button" class="test__start-btn">Начать тест</button>\n                <p id="test-description" class="test__text">${t.fullDescription}</p>\n                <div class="test__info">\n                    <div class="test__counting-questions">\n                        Количество вопросов: <span id="countingQuestions">${t.questions.length}</span>\n                    </div>\n                    <div class="test__time">\n                        Время прохождения: <span id="testTime">${t.time}</span> минут\n                    </div>\n                </div>\n            </div>\n        </div>`}(n),document.getElementById("start-button").addEventListener("click",o)}else e.innerHTML="<p>Тест не найден.</p>"}()}()}();